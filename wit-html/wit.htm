<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>What is That?</title>
    <style type="text/css">

        #gui {
            display: inline-block;
            margin-left: auto;
            margin-right: auto;
            /*float:left;*/
        }

        #scroller {
            display: inline-block;
            height: 587px;
            width: 350px;
            overflow: auto;
            /*background-color: #c2ceff;*/
            margin-left: auto;
            margin-right: auto;
        }

        #click-list {
            display: inline-block;
            margin-left: auto;
            margin-right: auto;
            /*float:left;*/
        }


    </style>
    <script src="./js/boxes.js"></script>
    <script>

        var Message = null;
        var ClickList = null;
        // @return var
        function FindBox(x, y){

            var i;
            var v;
            //console.log( "Finding x:"+x+" y:"+y);
            for( i = 0; i < image_boxes.length; i++ ){
                v = image_boxes[i];
                if( (v[0] <= x) && (v[1] <= y) && ( v[2] >= x ) &&
                        (v[3] >= y ) ){
                    v.ix = i;
                    return v;
                }
            }
            v.ix = -1;
            return v;
        }

        var FirstClick = function(){
            alert("Hi there");
        }

        function MakeClickList(){
            if( ClickList )
                return;
            ClickList = document.getElementById("click-list");

            var text = '';
            var i;
            for( i=0;i<image_boxes.length;i++){
                text = text +
                        ' <span style="white-space:nowrap">'+
                        '<span style="color: #1148f7; font-size:1.5em;' +
                        'font-weight:bold">'+
                        (i+1) +
                        '</span> <b>' +
                        '<a href = "/man/Transport_Toolbar "' +
                        'title = "Transport Toolbar">' +
                        '<span title = "Transport Toolbar has buttons for ' +
                        'controlling playback and recording and for moving to ' +
                        'the project start or end" >' +
                        image_boxes[i][4] +
                        '</span></a></b> &#160;'+
                        '</span>';
            }
            ClickList.innerHTML = text;
        }

        window.onload = function(){
            MakeClickList();
        }

        function ImageClick(event, isclick){
            if( !Message )
                Message = document.getElementById("message");
            //img.src = "./images/da-coloured.png";
            //var x1 = event.pageX - img.offsetLeft;
            //var y1 = event.pageY - img.offsetTop;
            var XX = event.offsetX;
            var YY = event.offsetY;

            var box = FindBox(XX, YY);
            if( box.ix < 0 )
                return;
            if( isclick ){
                console.log(box);
                console.log("x:" + XX + " y:" + YY + " Box:" + box.ix);
                MakeClickList();
            }
            Message.innerHTML = box[4];
            //alert( "X:"+ XX + " Y:"+ YY + " ix:"+ixx);
        }


    </script>
</head>
<body>

<div style="width:100%; text-align:center">
    <h1>What is That?</h1>
    <h2>Click on the diagram to find out more</h2>
    <div style="width:100%; text-align:center">

        <img id="gui" src="./images/blank-links.png"
             OnClick="ImageClick(event,true);"
             OnMouseMove="ImageClick(event,false);" alt="Audacity">
        <iframe id="scroller" src="./scroller-contents/top_menu.html"
                seamless></iframe>
        <div id="message">some message</div>
        <div id="click-list" style="width:1000px;" >The ClickList</div>
    </div>
</div>
</body>
</html>